alias gp='git push'
alias gl='git pull'
alias gr='git rebase'
alias gm='git merge'
alias gs='git stash'
alias gsl='git stash list'
alias gsp='git stash pop'
alias gc='git clone'
alias gch='git checkout'
alias gcn='git checkout -b'
alias gn='git branch --show-current'
alias gst='git status'
alias glog='git log --all --graph --decorate'
alias gp='git push'
alias gpc='git push --set-upstream origin $(git_current_branch)'
alias gml='gcm;gl'

alias gpall='find . -maxdepth 3 -name .git -type d | rev | cut -c 6- | rev | xargs -I {} git -C {} pull'

alias nio="ni --prefer-offline"
alias s="nr start"
alias d="nr dev"
alias b="nr build"
alias c="nr typecheck"
alias lint="nr lint"
alias lintf="nr lint --fix"
alias nu="npx -y taze@latest latest -I -r -f"

alias myip='curl ipinfo.io/ip'

alias tls='tmux ls'
alias ta='tmux attach-session -t'

# 专门用来连接一些第三方的服务器或者临时开的虚拟机，既不需要确认，也不会污染 known hosts
alias sss='ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no'

# 终端使用科学上网配置
alias ss='export https_proxy=http://127.0.0.1:7890 http_proxy=http://127.0.0.1:7890 all_proxy=socks5://127.0.0.1:7890'
alias unss='unset all_proxy http_proxy https_proxy'

alias lsdir='ls -d */' # only list directories

# 获取本机IP地址
alias ip="ifconfig | egrep '([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})' -o | egrep -v '\.255\$' | grep -v '127.0.0.1'"

# 显示系统信息
#alias s='screenfetch' # run slow
alias s='neofetch'  # run fast

# Docker Compose basics
alias dp='docker ps'
alias dtail='docker logs -tf --tail="50" "$@"'
alias dcup='docker compose up -d'
alias dcdown='docker compose down'
alias dclogs='docker compose logs -tf --tail="50"'
alias dcpull='docker compose pull'
alias dcps='docker compose ps'
alias dcrs='docker compose restart "$@"'

# Docker Compose like a pro
_filter_service() {
  service="$1" && [ -z "$1" ] && service=$(ls -l $COMPOSE_DIR | grep '^d' | awk '{print $NF}' | fzf)
}
up() {
  _filter_service $1
  docker compose -f $COMPOSE_DIR/$service/docker-compose.yml up -d
}
down() {
  _filter_service $1
  docker compose -f $COMPOSE_DIR/$service/docker-compose.yml down
}
restart() {
  _filter_service $1
  down $service && sleep 1 && up $service
}
pull() {
  _filter_service $1
  docker compose -f $COMPOSE_DIR/$service/docker-compose.yml pull
}
update() {
  _filter_service $1
  pull $service && restart $service
}
logs() {
  _filter_service $1
  docker compose -f $COMPOSE_DIR/$service/docker-compose.yml logs -tf --tail=50
}
